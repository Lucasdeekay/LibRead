{% extends 'base.html' %}
{% load static %}


{% block user %}
{% if current_clientele %}
<div>
    <small style="color:white">{{ current_clientele.clientele_id }}</small>
</div>
{% endif %}
{% endblock %}

{% block content %}
<!-- Start breadcrumb area -->
<div class="ht__breadcrumb__area bg-image--6">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__inner text-center">
                    <h2 class="breadcrumb-title">Admin</h2>
                    <nav class="breadcrumb-content">
                        <a class="breadcrumb_item" href="{% url 'Library:home' %}">Home</a>
                        <span class="brd-separator">/</span>
                        <span class="breadcrumb_item active">Admin</span>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End breadcrumb area -->
<!-- Start Message area -->
{% for message in messages %}
{% if message.success %}
<section class="my_account_area pt--80 pb--55 bg--white" id="suc-sec">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <article class="message is-success">
                    <div class="message-header">
                        <p>Success</p>
                        <button class="delete" aria-label="delete"></button>
                    </div>
                    <div class="message-body">
                        <em>{{ message }}</em>
                    </div>
                </article>
            </div>
        </div>
    </div>
</section>
{% else %}
<section class="my_account_area pt--80 pb--55 bg--white" id="err-sec">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <article class="message is-danger">
                    <div class="message-header">
                        <p>Error</p>
                        <button class="delete" aria-label="delete"></button>
                    </div>
                    <div class="message-body">
                        <em>{{ message }}</em>
                    </div>
                </article>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endfor %}
<!-- End Message area -->
<!-- Start Tab area -->
{% if current_clientele.role == 'Admin' %}
<div class="container mt-5">
    <div class="tabs is-toggle is-fullwidth">
        <ul>
            <li id="ebook-button">
                <a>
                    <span class="icon is-small"><i class="fas fa-image" aria-hidden="true"></i></span>
                    <span>Upload Ebook</span>
                </a>
            </li>
            <li id="journal-button">
                <a>
                    <span class="icon is-small"><i class="fas fa-music" aria-hidden="true"></i></span>
                    <span>Upload Journal</span>
                </a>
            </li>
            <li id="blog-button">
                <a>
                    <span class="icon is-small"><i class="fas fa-film" aria-hidden="true"></i></span>
                    <span>Upload Blog</span>
                </a>
            </li>
            <li id="user-auth-button">
                <a>
                    <span class="icon is-small"><i class="far fa-file-alt" aria-hidden="true"></i></span>
                    <span>Authenticate User</span>
                </a>
            </li>
            <li id="journal-auth-button">
                <a>
                    <span class="icon is-small"><i class="far fa-file-alt" aria-hidden="true"></i></span>
                    <span>Authenticate Journal</span>
                </a>
            </li>
        </ul>
    </div>
</div>
{% endif %}
<!-- Start Tab area -->
{% if current_clientele.role == 'Admin' %}
<!-- Start Upload Ebook Area -->
<section class="my_account_area pt--80 pb--55 bg--white" id="ebook-section">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <div class="my__account__wrapper">
                    <h3 class="account__title">Upload Ebook</h3>
                    <form action="{% url 'Library:upload_ebook' %}" method="post" enctype="multipart/form-data"
                          style="background-color:#D3D3EE; border-radius:5%">
                        {% csrf_token %}
                        <div class="account__form" style="border:0">
                            <div class="field">
                                <label class="label">Title <span>*</span></label>
                                <div class="control">
                                    <input class="input" type="text" placeholder="Enter title"
                                           name="title"
                                           required>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label">Authors <span>*</span></label>
                                <div class="control">
                                    <input class="input" type="text" placeholder="Enter authors"
                                           name="authors"
                                           required>
                                </div>
                                <small>Name of authors should be separated with a comma</small>
                            </div>
                            <div class="field">
                                <label class="label">Description <span>*</span></label>
                                <div class="control">
                                    <textarea class="textarea is-info" name="description" maxlength="250"
                                              placeholder="Info textarea" required></textarea>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label">Programme <span>*</span></label>
                                <div class="control">
                                    <div class="select">
                                        <select name="programme" required>
                                            <option value="">Select Programme...</option>
                                            <option value="Computer Science">Computer Science</option>
                                            <option value="Biochemistry">Biochemistry</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <div class="has-name is-fullwidth">
                                    <label class="file-label input">
                                        <input type="file" name="file" required>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <button class="button is-fullwidth is-rounded is-link label" type="submit">Submit
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Upload Ebook Area -->
<!-- Start Upload Blog Area -->
<section class="my_account_area pt--80 pb--55 bg--white" id="blog-section">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <div class="my__account__wrapper">
                    <h3 class="account__title">Upload Blog</h3>
                    <form action="{% url 'Library:upload_blog' %}" method="post" enctype="multipart/form-data"
                          style="background-color:#C9F299; border-radius:5%">
                        {% csrf_token %}
                        <div class="account__form" style="border:0">
                            <div class="field">
                                <label class="label">Title <span>*</span></label>
                                <div class="control">
                                    <input class="input" type="text" placeholder="Enter title"
                                           name="title"
                                           required>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label">Description <span>*</span></label>
                                <div class="control">
                                    <textarea class="textarea is-info" name="article" maxlength="500"
                                              placeholder="Info textarea" required></textarea>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label">Add image <span>*</span></label>
                                <div class="has-name is-fullwidth">
                                    <label class="file-label input">
                                        <input type="file" name="image" required>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <button class="button is-fullwidth is-rounded is-success label" type="submit">Submit
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Upload Blog Area -->
<!-- Start Authenticate User Area -->
<section class="my_account_area pt--80 pb--55 bg--white" id="user-auth-section">
    <div class="container">
        <div class="table-responsive">
            <table class="table table-striped table-sm">
                <thead>
                <tr>
                    <th scope="col">Last Name</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Matric No</th>
                    <th scope="col">Role</th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                </tr>
                </thead>
                <tbody>
                {% if unauthorized_clienteles %}
                {% for clientele in unauthorized_clienteles %}
                <tr>
                    <td>{{ clientele.last_name }}</td>
                    <td>{{ clientele.first_name }}</td>
                    <td>{{ clientele.clientele_id }}</td>
                    <td>{{ clientele.role }}</td>
                    <td><a href="{% url 'Library:reject_clientele' clientele.id %}"><button class="button is-danger">Reject</button></a></td>
                    <td><a href="{% url 'Library:approve_clientele' clientele.id %}"><button class="button is-success">Approve</button></a></td>
                </tr>
                {% endfor %}
                {% else %}
                <tr>
                    <td>No unauthorized user available </td>
                </tr>
                {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</section>
<!-- End Authenticate User Area -->
<!-- Start Authenticate Journal Area -->
<section class="my_account_area pt--80 pb--55 bg--white" id="journal-auth-section">
    <div class="container">
        <div class="table-responsive">
            <table class="table table-striped table-sm">
                <thead>
                <tr>
                    <th scope="col">Title</th>
                    <th scope="col">Date Of Submission</th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                </tr>
                </thead>
                <tbody>
                {% if unauthorized_journals %}
                {% for journal in unauthorized_journals %}
                <tr>
                    <td>{{ journal.title }}</td>
                    <td>{{ journal.date }}</td>
                    <!-- TODO : Fix the journal download -->
                    <td><a href="{{ journal.file }}.pdf" download><button class="button is-link">Download</button></a></td>
                    <td><a href="{% url 'Library:reject_journal' journal.id %}"><button class="button is-danger">Reject</button></a></td>
                    <td><a href="{% url 'Library:approve_journal' journal.id %}"><button class="button is-success">Approve</button></a></td>
                </tr>
                {% endfor %}
                {% else %}
                <tr>
                    <td>No unauthorized journal available </td>
                </tr>
                {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</section>
<!-- End Authenticate Journals Area -->
{% endif %}
<!-- Start Upload Journal Area -->
<section class="my_account_area pt--80 pb--55 bg--white" id="journal-section">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <div class="my__account__wrapper">
                    <h3 class="account__title">Upload Journal</h3>
                    <form action="{% url 'Library:upload_journal' %}" method="post" enctype="multipart/form-data"
                          style="background-color:#9298A0; border-radius:5%">
                        {% csrf_token %}
                        <div class="account__form" style="border:0">
                            <div class="field">
                                <label class="label">Title <span>*</span></label>
                                <div class="control">
                                    <input class="input" type="text" placeholder="Enter title"
                                           name="title"
                                           required>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label">Authors <span>*</span></label>
                                <div class="control">
                                    <input class="input" type="text" placeholder="Enter authors"
                                           name="authors"
                                           required>
                                </div>
                                <small>Name of authors should be separated with a comma</small>
                            </div>
                            <div class="field">
                                <label class="label">Description <span>*</span></label>
                                <div class="control">
                                    <textarea class="textarea is-info" name="description" maxlength="250"
                                              placeholder="Info textarea" required></textarea>
                                </div>
                            </div>
                            <div class="field">
                                <div class="has-name is-fullwidth">
                                    <label class="file-label input">
                                        <input type="file" name="file" required>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <button class="button is-fullwidth is-rounded is-dark label" type="submit">Submit
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Upload Journals Area -->
{% endblock %}

