{% extends 'base.html' %}
{% load static %}


{% block title %}
<!-- if current_clientele.role == 'Admin' -->
<title>Admin</title>
<!-- else -->
<!--<title>Upload Journal</title>-->
<!-- endif -->
{% endblock %}

{% block user %}
{% if current_clientele %}
<div>
    <small style="color:white">{{ current_clientele.clientele_id }}</small>
</div>
{% endif %}
{% endblock %}

{% block content %}
<!-- Start breadcrumb area -->
<div class="ht__breadcrumb__area bg-image--10 lazy">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__inner text-center">
                    <h2 class="breadcrumb-title">Admin</h2>
                    <nav class="breadcrumb-content">
                        <a class="breadcrumb_item" href="{% url 'Library:home' %}">Home</a>
                        <span class="brd-separator">/</span>
                        <span class="breadcrumb_item active">{% if current_clientele.role == 'Admin' %}Admin{% else %}Upload Journal{% endif %}</span>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End breadcrumb area -->
<!-- Start Message area -->
{% for message in messages %}
{% if message.tags == "success" %}
<section class="my_account_area pt--80 pb--55 bg--white" id="suc-sec">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <article class="message is-success">
                    <div class="message-header">
                        <p>Success</p>
                        <button class="delete" aria-label="delete"></button>
                    </div>
                    <div class="message-body">
                        <em>{{ message }}</em>
                    </div>
                </article>
            </div>
        </div>
    </div>
</section>
{% else %}
<section class="my_account_area pt--80 pb--55 bg--white" id="err-sec">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-6">
                <article class="message is-danger">
                    <div class="message-header">
                        <p>Error</p>
                        <button class="delete" aria-label="delete"></button>
                    </div>
                    <div class="message-body">
                        <em>{{ message }}</em>
                    </div>
                </article>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endfor %}
<!-- End Message area -->
<!-- Start Tab area -->
<!-- if current_clientele.role == 'Admin' -->
<div class="container mt-5">
    <div class="tabs is-toggle is-fullwidth">
        <ul>
            <li id="ebook-button">
                <a>
                    <span class="icon is-small"><i class="fa fa-book" aria-hidden="true"></i></span>
                    <span>Upload Ebook</span>
                </a>
            </li>
            <li id="journal-button">
                <a>
                    <span class="icon is-small"><i class="fa fa-newspaper-o" aria-hidden="true"></i></span>
                    <span>Upload Journal</span>
                </a>
            </li>
            <li id="blog-button">
                <a>
                    <span class="icon is-small"><i class="fa fa-comments" aria-hidden="true"></i></span>
                    <span>Upload Blog</span>
                </a>
            </li>
            <li id="user-auth-button">
                <a>
                    <span class="icon is-small"><i class="fa fa-users" aria-hidden="true"></i></span>
                    <span>Authenticate User</span>
                </a>
            </li>
            <li id="journal-auth-button">
                <a>
                    <span class="icon is-small"><i class="fa fa-archive" aria-hidden="true"></i></span>
                    <span>Authenticate Journal</span>
                </a>
            </li>
        </ul>
    </div>
</div>
<!-- endif -->
<section class="my_account_area pt--80 pb--55 bg--white">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-12">
                                <!-- Start Tab area -->
                                {% if current_clientele.role == 'Admin' %}
                                <!-- Start Upload Ebook Area -->
                                <section class="my_account_area pb--55 bg--white" id="ebook-section">
                                    <div class="container">
                                        <div class="row d-flex justify-content-center">
                                            <div class="col-sm-8 col-lg-9">
                                                <div class="my__account__wrapper">
                                                    <h3 class="account__title">Upload Ebook</h3>
                                                    <form action="" method="post" enctype="multipart/form-data"
                                                          style="background-color:#D3D3EE; border-radius:5%">
                                                        {% csrf_token %}
                                                        <div class="account__form row d-flex" style="border:0">
                                                            {% include 'library/django_form.html' with form=ebook_form %}
                                                            <div>
                                                                <button class="button is-fullwidth is-rounded is-link label" type="submit">Submit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- End Upload Ebook Area -->
                                <!-- Start Upload Blog Area -->
                                <section class="my_account_area pb--55 bg--white" id="blog-section">
                                    <div class="container">
                                        <div class="row d-flex justify-content-center">
                                            <div class="col-sm-8 col-lg-9">
                                                <div class="my__account__wrapper">
                                                    <h3 class="account__title">Upload Blog</h3>
                                                    <form action="" method="post" enctype="multipart/form-data"
                                                          style="background-color:#C9F299; border-radius:5%">
                                                        {% csrf_token %}
                                                        <div class="account__form row d-flex" style="border:0">
                                                            {% include 'library/django_form.html' with form=blog_form %}
                                                            <div>
                                                                <button class="button is-fullwidth is-rounded is-success label" type="submit">Submit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- End Upload Blog Area -->
                                <!-- Start Authenticate User Area -->
                                <section class="my_account_area pb--55 bg--white" id="user-auth-section">
                                    <div class="container">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-sm">
                                                <thead>
                                                <tr>
                                                    <th scope="col">Last Name</th>
                                                    <th scope="col">First Name</th>
                                                    <th scope="col">Matric No</th>
                                                    <th scope="col">Role</th>
                                                    <th scope="col"></th>
                                                    <th scope="col"></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% if unauthorized_clienteles %}
                                                {% for clientele in clientele_obj %}
                                                <tr>
                                                    <td>{{ clientele.last_name }}</td>
                                                    <td>{{ clientele.first_name }}</td>
                                                    <td>{{ clientele.clientele_id }}</td>
                                                    <td>{{ clientele.role }}</td>
                                                    <td><a href="{% url 'Library:reject_clientele' clientele.id %}"><button class="button is-danger">Reject</button></a></td>
                                                    <td><a href="{% url 'Library:approve_clientele' clientele.id %}"><button class="button is-success">Approve</button></a></td>
                                                </tr>
                                                {% endfor %}
                                                {% else %}
                                                <tr>
                                                    <td>No unauthorized user available </td>
                                                </tr>
                                                {% endif %}
                                                </tbody>
                                            </table>
                                            <div class="">
                                                        <nav aria-label="Page navigation conatiner"></nav>
                                                        <ul class="pagination justify-content-center">
                                                            {% if clientele_obj.has_previous %}
                                                            <li><a href="?page={{ clientele_obj.previous_page_number }}" class="button is-rounded is-dark">&laquo; PREV </a></li>
                                                            {% endif %}
                                                            <span class="current mx-3">
                                                            Page {{ clientele_obj.number }} of {{ clientele_obj.paginator.num_pages }}.
                                                        </span>
                                                            {% if clientele_obj.has_next %}
                                                            <li><a href="?page={{ clientele_obj.next_page_number }}" class="button is-rounded is-dark"> NEXT &raquo;</a></li>

                                                            {% endif %}
                                                        </ul>
                                                        </nav>
                                                    </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- End Authenticate User Area -->
                                <!-- Start Authenticate Journal Area -->
                                <section class="my_account_area pb--55 bg--white" id="journal-auth-section">
                                    <div class="container">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-sm">
                                                <thead>
                                                <tr>
                                                    <th scope="col">Title</th>
                                                    <th scope="col">Date Of Submission</th>
                                                    <th scope="col"></th>
                                                    <th scope="col"></th>
                                                    <th scope="col"></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% if unauthorized_journals %}
                                                {% for journal in journal_obj %}
                                                <tr>
                                                    <td>{{ journal.title }}</td>
                                                    <td>{{ journal.date }}</td>
                                                    <td><a href="{{ journal.file.url }}" download><button class="button is-link">Download</button></a></td>
                                                    <td><a href="{% url 'Library:reject_journal' journal.id %}"><button class="button is-danger">Reject</button></a></td>
                                                    <td><a href="{% url 'Library:approve_journal' journal.id %}"><button class="button is-success">Approve</button></a></td>
                                                </tr>
                                                {% endfor %}
                                                {% else %}
                                                <tr>
                                                    <td>No unauthorized journal available </td>
                                                </tr>
                                                {% endif %}
                                                </tbody>
                                            </table>
                                            <div class="">
                                                        <nav aria-label="Page navigation conatiner"></nav>
                                                        <ul class="pagination justify-content-center">
                                                            {% if journal_obj.has_previous %}
                                                            <li><a href="?page={{ journal_obj.previous_page_number }}" class="button is-rounded is-dark">&laquo; PREV </a></li>
                                                            {% endif %}
                                                            <span class="current mx-3">
                                                            Page {{ journal_obj.number }} of {{ journal_obj.paginator.num_pages }}.
                                                        </span>
                                                            {% if journal_obj.has_next %}
                                                            <li><a href="?page={{ journal_obj.next_page_number }}" class="button is-rounded is-dark"> NEXT &raquo;</a></li>

                                                            {% endif %}
                                                        </ul>
                                                        </nav>
                                                    </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- End Authenticate Journals Area -->
                                {% endif %}
                                <!-- Start Upload Journal Area -->
                                <section class="my_account_area pb--55 bg--white" id="journal-section">
                                    <div class="container">
                                        <div class="row d-flex justify-content-center">
                                            <div class="col-sm-8 col-lg-9">
                                                <div class="my__account__wrapper">
                                                    <h3 class="account__title">Upload Journal</h3>
                                                    <form action="" method="post" enctype="multipart/form-data"
                                                          style="background-color:#9298A0; border-radius:5%">
                                                        {% csrf_token %}
                                                        <div class="account__form row d-flex" style="border:0">
                                                            {% include 'library/django_form.html' with form=journal_form %}
                                                            <div>
                                                                <button class="button is-fullwidth is-rounded is-dark label" type="submit">Submit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- End Upload Journals Area -->
                            </div>
                        </div>
                    </div>
                </section>
{% endblock %}

